<% require_js 'calendar', 'calendar-setup', 'calendar-ru-UTF' %>
<% require_css 'calendar' %>

<%= error_messages_for @game, :header => "<h2>Ошибка</h2>" %>

<%= form_for @game, :action => resource(:games) do %>
    <p><%= text_field :name, :label => "Название" %></p>
    <p><%= text_area :description, :label => "Описание" %></p>
    <p><%= text_field :starts_at, :label => "Начало игры" %> <input id="calendar-switch" type="button" value="..."/></p>
    <br/><p><%= text_field :registration_deadline, :label => "Крайний срок регистрации " %><input id="calendar-switch2" type="button" value="..."/></p>
    <br/><p><%= check_box :is_free, :label => "Доступна для всех?"%></p>
    <br/>
    <br/><em>Доступность игры означает, что в нее могут играть все зарегистрированные команды.</em>
    <br/><em>Если игра недоступна для всех, команду необходимо назначить на игру.</em>
    <br/>
    <br/><p><%= check_box :is_draft, :label => "Черновик?" %></p>
    <br/>
    <%= submit "Создать игру" %>
<% end =%>

<br/>

<script type="text/javascript">
    Calendar.setup(
    {
        inputField  : "game_starts_at",
        ifFormat    : "%Y-%m-%d %H:%M",
        button      : "calendar-switch",
        showsTime   : true
    }
            );
    Calendar.setup(
    {
        inputField  : "game_registration_deadline",
        ifFormat    : "%Y-%m-%d %H:%M",
        button      : "calendar-switch2",
        showsTime   : true
    }
            );
</script>